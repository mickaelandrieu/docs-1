<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://www.backbee.com/developper-documentation/components/routing/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Routing - The BackBee documentation</title>

        <link href="../../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">The BackBee documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../../..">Introduction</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developper documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../requirements/">Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../../installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="../../architecture/">Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../../configuration/">Configuration</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbooks <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../cookbooks/create_new_commands/">Create new commands</a>
                        </li>
                    
                        <li >
                            <a href="../../cookbooks/customize_error_pages/">Customize error pages</a>
                        </li>
                    
                        <li >
                            <a href="../../cookbooks/use_swift_mailer_in_backbee/">Use Swift Mailer in BackBee</a>
                        </li>
                    
                        <li >
                            <a href="../../cookbooks/create_bundle_administration/">Create bundle administration</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../classcontent/">ClassContent</a>
                        </li>
                    
                        <li >
                            <a href="../config/">Config</a>
                        </li>
                    
                        <li >
                            <a href="../event_listener/">Event Listener</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Routing</a>
                        </li>
                    
                        <li >
                            <a href="../security/">Security</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../event_listener/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../security/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/backbee/docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#components">Components</a></li>
        
            <li><a href="#the-routing-component">The Routing component</a></li>
        
            <li><a href="#how-the-routing-component-work">How the Routing component work ?</a></li>
        
            <li><a href="#routing-component-requirements">Routing component requirements</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="components">Components</h1>
<h2 id="the-routing-component">The Routing component</h2>
<p>This component is used in BackBee to map an HTTP request to a set of configuration variables.
Note this component is an extension of <a href="http://symfony.com/doc/current/components/routing/introduction.html">Symfony Routing Component</a>, so the official documentation is
still valid.</p>
<h2 id="how-the-routing-component-work">How the Routing component work ?</h2>
<p>To set a basic routing system, you need at least to set and configure three objects:</p>
<ul>
<li>A <code>BackBee\Routing\RouteCollection</code> instance, which contains routes definitions (instance of <code>BackBee\Routing\Route</code>);</li>
<li>A <code>BackBee\Routing\RequestContext</code> instance, which embed the current request;</li>
<li>Finaly, a <code>RequestMatcher</code> instance, in charge of performs the mapping from request to a Route.</li>
</ul>
<p>In BackBee CMS, all routes are declared in <code>BackBee/Config/route.yml</code> file, but obviously you can create your own routes in Standard
Edition if you have frameworks needs outside the "CMS" context (backend bundles for instance).</p>
<p>The <code>route.yml</code> is parsed by the Yaml component and BackBee create a <code>RouteCollection</code> instance, which is stored in Container as the
<code>routing</code> service (Symfony developpers should notice this behavior is a little bit different to the Symfony <code>router</code> service which is not available in BackBee).</p>
<p>In this file, you can find all the routes (and so on, paths) from the actual REST API used to communicate with the Javascript client when you are logged to BackBee Standard Edition.</p>
<p>Also, some routes are defined to handle some resources and finaly the most important route is the default route.</p>
<p>Let's take an example:</p>
<pre><code class="yaml"># Access all media
bb.media.list:
  pattern: /rest/{version}/medialist
  defaults:
    _action: medialistAction
    _controller: BackBee\Rest\Controller\MediaController # can be a service definition
  requirements:
    _method: GET
</code></pre>

<p>A <code>BackBee\Route</code> is defined by a pattern (mostly an url path) where we can use variables, have some mandatory defaults
(binded to a Controller and an action) and may have some requirements.</p>
<h2 id="routing-component-requirements">Routing component requirements</h2>
<p>The <code>requirements</code> property allow use to add requirements used by the <code>RequestMatcher</code> to map an url to a request.</p>
<p>This is an example of some available requirements:</p>
<pre><code class="yaml"># this route is very difficult to match
route.name:
  pattern: /route/{a}/{b}/{c}/difficult
  defaults:
    _action: fooAction
    _controller: Baz\BarController
  requirements:
    a: .+ # accept regex conditions
    b: \d+
    _method:POST
    condition: &quot;context.getMethod() in ['GET', 'HEAD'] and request.headers.get('User-Agent') matches '/firefox/i'&quot; # use the Symfony Expression Language component
</code></pre>

<p>The <code>condition</code> requirement can use the Symfony Expression Language component and have access to:
<em> <code>context</code>: the instance of RequestContext;
</em> <code>request</code>: the instance of the actual Request;</p>
<p>If you are interested in this component, you can take a look to the official <a href="http://symfony.com/doc/current/components/expression_language/index.html">Expression Language</a> documentation.</p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<center>Copyright &copy; 2014-2015, <a href="http://www.backbee.com">BackBee project</a>.</center>
		
		<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
	</footer>


        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script src="../../../js/base.js"></script>
        <script src="../../../js/backbee.js"></script>
    </body>
</html>